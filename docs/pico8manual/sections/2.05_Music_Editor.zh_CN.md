## 2.5 音乐编辑器

PICO-8 中的音乐由一系列“模式”控制。每个模式是一个包含 4 个数字的列表，指示该通道将播放哪个 SFX。

### ▨ 流程控制

播放流程可以通过右上角的 3 个按钮进行控制。

当一个模式播放完毕时，会播放下一个模式，除非：

- 没有数据可供播放（音乐停止）  
- 该模式设置了 STOP 命令（第三个按钮）  
- 设置了 LOOP BACK 命令（第二个按钮），在这种情况下，音乐播放器会回溯查找设置了 LOOP START 命令的模式（第一个按钮），如果没有找到，则返回到模式 0。  

当一个模式包含不同速度的 SFX 时，模式会在最左边的非循环通道播放完毕时结束播放。这可以用来设置双倍时间的鼓点或不寻常的复节奏。

对于 3/4 这样的时间签名，如果应该在跳转到下一个模式之前播放少于 32 行，可以通过仅调整第一个循环位置并保持第二个位置为零来设置 SFX 的长度。这将在 SFX 编辑器中显示为 "LEN"（表示“长度”），而不是 "LOOP"。

### ▨ 复制和粘贴音乐

要选择一系列模式：单击模式导航器中的第一个模式，然后按住 Shift 单击最后一个模式。可以选择的模式可以使用 CTRL-C 和 CTRL-V 进行复制和粘贴。粘贴到另一个卡带时，如果 SFX 不存在，每个模式指向的 SFX 也会被粘贴（可能具有不同的索引）。

### ▨ SFX 乐器

除了 8 个内置乐器外，还可以使用前 8 个 SFX 定义自定义乐器。使用乐器右侧的切换按钮选择一个索引，该索引将在乐器通道中显示为绿色而不是粉色。

当播放 SFX 乐器音符时，它实际上会触发该 SFX，但会改变音符的属性：

- 音高相对于 C2 添加  
- 音量乘以  
- 效果会叠加到 SFX 乐器的效果上  
- SFX 乐器中启用的任何滤波器也会为该音符启用  

例如，可以通过在 SFX 0 中定义一个快速在音量 5 和 2 之间交替的简单颤动效果来实现。使用该乐器播放音符时，音量可以像平常一样进一步改变（通过音量通道或使用淡入/淡出效果）。这样，SFX 乐器可以用来控制音量、音高和纹理的详细变化组合。

SFX 乐器仅在音高变化或前一个音符的音量为零时重新触发。这对于随时间变化较慢的乐器很有用。例如：逐渐淡出的铃声。要反转此行为，可以在触发音符时使用效果 3（通常是“drop”）。触发 SFX 乐器时，其他所有效果值具有其通常的含义。

### ▨ 波形乐器

波形乐器的工作方式与 SFX 乐器相同，但由一个自定义的 64 字节循环波形组成。在 SFX 编辑器中点击波形切换按钮以使用 SFX 0..7 作为波形乐器。在这种模式下，可以使用鼠标绘制样本。

### ▨ 音阶捕捉

在音高模式下绘制音符时，按住 CTRL 可以捕捉到当前定义的音阶。默认音阶为 C 小调五声音阶，但可以使用音阶编辑模式进行自定义。右下角有一个小键盘图标可以切换此功能。有 2 个移调按钮、1 个反转按钮和 3 个音阶预设按钮：

```
Dim   减七度音阶 // 反转以获得全半音阶  
Maj   大调音阶          // 反转以获得五声音阶  
Who   全音阶     // 反转以获得.. 另一个全音阶  
```

更改音阶不会改变当前的 SFX，只有在按住 CTRL 绘制新音符时才会应用音阶。